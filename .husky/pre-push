#!/bin/sh
# 🤖 [IA] - v1.2.5: Pre-push hook - Full validation before push (skip in CI)
. "$(dirname "$0")/_/husky.sh"

# Skip pre-push validation in CI environments
if [ -n "$CI" ] || [ -n "$GITHUB_ACTIONS" ]; then
    echo "⏭️  Skipping pre-push validation in CI environment"
    exit 0
fi

echo "🚀 Running pre-push validation..."
echo "This will run complete test suite to ensure code quality"

# Run unit tests in Docker
echo "Running unit tests..."
./Scripts/docker-test-commands.sh test:unit || {
    echo "❌ Unit tests failed! Push aborted."
    exit 1
}

echo "✅ All pre-push checks passed! Pushing to remote..."