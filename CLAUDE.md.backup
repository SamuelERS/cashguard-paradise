# CLAUDE.md v1.1.18

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

CashGuard Paradise v1.1.18 is a cash management system for "Acuarios Paradise" retail stores, built with React, TypeScript, Vite, and shadcn/ui. The application now implements **dual operation modes**: morning cash count (inicio de turno) and evening cash cut (fin de turno), with multi-phase protocols and anti-fraud measures.

### üß™ Testing Status
- **SECTOR 1 ‚úÖ**: Testing framework foundation (10 smoke tests)
- **SECTOR 2 ‚úÖ**: Financial calculations (107 critical tests) - 100% coverage
- **SECTOR 3 üöß**: Component tests (pending)
- **SECTOR 4 üöß**: Integration tests (pending)
- **SECTOR 5 üöß**: E2E tests with Playwright (pending)

## üìä Patrones Consolidados

### Glass Effect Design System
El sistema utiliza un dise√±o glass morphism consistente en toda la aplicaci√≥n:
- **Background est√°ndar:** `rgba(36, 36, 36, 0.4)` con `blur(20px)`
- **Bordes:** `rgba(255, 255, 255, 0.15)` para definici√≥n sutil
- **Gradientes de iconos:**
  - Azul-p√∫rpura: `#0a84ff ‚Üí #5e5ce6` (Shield, MapPin)
  - Verde: `#00ba7c ‚Üí #06d6a0` (DollarSign, Success states)
  - Naranja: `#f4a52a ‚Üí #ffb84d` (Monedas, Fish icon)
- **Colores de texto:** #e1e8ed (t√≠tulos), #8899a6 (subtextos)

### Mobile UX Optimizations
Soluciones implementadas para experiencia m√≥vil perfecta:
- **Keyboard Persistence:** TouchEnd handlers con preventDefault()
- **Sequential Navigation:** Auto-progresi√≥n entre campos con focus management
- **Responsive Layouts:** Breakpoints sm/md/lg con tama√±os adaptativos
- **Input Types:** `type="tel"` con `inputMode="numeric"` para teclados num√©ricos

### Wizard Flow Pattern
Flujo de 5 pasos optimizado:
1. Protocolo de seguridad (4 reglas simplificadas)
2. Selecci√≥n de sucursal
3. Selecci√≥n de cajero
4. Validaci√≥n de testigo (‚â† cajero)
5. Venta esperada SICAR

### Performance Patterns
- **Timing unificado:** Sistema centralizado sin race conditions
- **AnimatePresence:** Optimizado con initial={false}
- **Memoizaci√≥n:** useCallback y useRef para evitar re-renders
- **Code splitting:** Componentes modulares (DRY principle)

---

## üìù Recent Updates (√öltimos 15)

*Para historial completo v1.0.2 - v1.0.65, ver [CHANGELOG-HISTORICO.md](/Documentos%20MarkDown/CHANGELOG-HISTORICO.md)*

## Recent Updates v1.1.18

### üí∞ SECTOR 2: Financial Calculations Testing - Complete Implementation
- **PROBLEMA:** Funciones cr√≠ticas de c√°lculo de dinero sin tests automatizados
- **RIESGO:** Cada bug en c√°lculos podr√≠a significar p√©rdidas econ√≥micas reales
- **SOLUCI√ìN IMPLEMENTADA - SECTOR 2 COMPLETO:**
  1. **107 tests cr√≠ticos** protegiendo el n√∫cleo financiero
  2. **3 archivos de tests** con 1,642 l√≠neas de c√≥digo robusto
  3. **Funciones cr√≠ticas cubiertas:**
     - `calculateCashTotal`: 15 tests - precisi√≥n en centavos garantizada
     - `calculateChange50`: 20 tests - algoritmo de cambio exacto validado
     - `calculateDeliveryDistribution`: 25 tests - distribuci√≥n Fase 2 asegurada
     - `formatCurrency`: 10 tests - formateo consistente
     - Funciones auxiliares: 37 tests adicionales
  4. **Edge cases manejados:** Infinity, NaN, -0, overflow, valores negativos
  5. **Precisi√≥n decimal:** `toBeCloseTo()` para evitar errores de punto flotante
  6. **Performance validada:** Tests ajustados para Docker (timeouts 500-1000ms)
  7. **Datos reales:** Escenarios t√≠picos de Acuarios Paradise incluidos
- **ARCHIVOS CREADOS:**
  ```
  src/__tests__/unit/utils/
  ‚îú‚îÄ‚îÄ calculations.test.ts        # 681 l√≠neas - Tests principales
  ‚îú‚îÄ‚îÄ deliveryCalculation.test.ts # 553 l√≠neas - Tests Fase 2
  ‚îî‚îÄ‚îÄ formatters.test.ts          # 408 l√≠neas - Utilidades
  ```
- **RESULTADO:** 100% tests pasando, 0 errores, ejecuci√≥n en 1.85s
- **IMPACTO:** Coraz√≥n financiero blindado, cada centavo calculado est√° validado

## Recent Updates v1.1.17

### üß™ Testing Framework Foundation - Docker-First Implementation (SECTOR 1)
- **PROBLEMA:** Sistema sin pruebas automatizadas manejando dinero real (0% cobertura)
- **AN√ÅLISIS:** Cada bug en producci√≥n puede significar p√©rdidas econ√≥micas reales
- **SOLUCI√ìN IMPLEMENTADA - SECTOR 1 COMPLETO:**
  1. **Estructura de testing:** Carpetas `src/__tests__/{unit,integration,fixtures}` y `src/__mocks__`
  2. **Docker dedicado:** `Dockerfile.test` y `docker-compose.test.yml` para entorno aislado
  3. **Vitest configurado:** Framework optimizado para Vite con jsdom y coverage
  4. **Setup global:** Mocks completos de localStorage, sessionStorage, matchMedia, IntersectionObserver
  5. **Smoke tests:** 10 tests iniciales validando setup completo
  6. **Scripts helper:** `Scripts/docker-test-commands.sh` con 14 comandos √∫tiles
  7. **Test fixtures:** Datos de prueba organizados para escenarios reales
  8. **DevDependencies:** 8 nuevas librer√≠as (vitest, testing-library, jsdom, msw)
- **ARCHIVOS CREADOS:** 11 archivos nuevos sin tocar c√≥digo existente
- **COMANDOS DISPONIBLES:**
  ```bash
  ./Scripts/docker-test-commands.sh build    # Construir contenedores
  ./Scripts/docker-test-commands.sh test     # Ejecutar tests
  ./Scripts/docker-test-commands.sh test:watch # Modo desarrollo
  ./Scripts/docker-test-commands.sh clean    # Limpiar todo
  ```
- **RESULTADO:** Base s√≥lida para testing con 0% impacto en c√≥digo de producci√≥n
- **BUILD:** ‚úÖ Verificado - sigue funcionando sin problemas
- **PR√ìXIMO PASO:** SECTOR 2 - Tests de c√°lculos cr√≠ticos (calculateCashTotal, etc.)
- **IMPACTO:** Fundaci√≥n lista para alcanzar 80%+ cobertura en pr√≥ximas iteraciones

## Recent Updates v1.1.16

### üîß Fix Completo: Teclado en PWA Instalada (Standalone Mode)
- **PROBLEMA:** El teclado num√©rico no aparec√≠a cuando la app estaba instalada como PWA, pero s√≠ funcionaba en navegador
- **CAUSA RA√çZ:** iOS Safari tiene restricciones adicionales en PWAs con `display: "standalone"`
- **SOLUCI√ìN MULTI-CAPA:**
  1. **Detecci√≥n de PWA:** C√≥digo para detectar si est√° en modo standalone
  2. **Handlers adicionales:** `onClick` y `onTouchStart` para forzar focus
  3. **Delay aumentado:** 300ms en PWA vs 100ms en navegador
  4. **CSS espec√≠fico:** Media query `@media (display-mode: standalone)` con mejoras
  5. **Meta viewport mejorado:** Agregado `interactive-widget=resizes-content`
  6. **Atributos HTML5:** `autoCapitalize="off"`, `autoCorrect="off"`, `autoComplete="off"`
  7. **Removido autoFocus:** Evita conflictos en PWA
- **ARCHIVOS:** GuidedFieldView.tsx, GuidedDenominationItem.tsx, index.css, index.html
- **RESULTADO:** Teclado funciona correctamente tanto en navegador como en PWA instalada
- **IMPACTO:** Experiencia consistente sin importar c√≥mo accede el usuario a la app

## Recent Updates v1.1.15

### üîß Fix Cr√≠tico: Teclado Num√©rico No Aparece en Conteo Matutino
- **PROBLEMA:** El teclado num√©rico t√°ctil no aparec√≠a al hacer tap en los campos de entrada durante el conteo matutino
- **CAUSA RA√çZ DETECTADA:**
  1. Input usaba `type="text"` en lugar de `type="tel"` 
  2. preventDefaults agresivos en bot√≥n bloqueaban el focus
  3. Timing del autoFocus muy r√°pido causaba conflictos
- **SOLUCI√ìN IMPLEMENTADA:**
  1. **GuidedFieldView.tsx:** Cambiado `type="text"` a `type="tel"` (m√°s confiable para m√≥viles)
  2. **Removidos preventDefaults:** Eliminados `onMouseDown` y `onTouchStart` del bot√≥n Confirmar
  3. **Timing ajustado:** Delay de 100ms en autoFocus para evitar conflictos
  4. **useTimingConfig mejorado:** Ahora acepta delay personalizado opcional
  5. **GuidedDenominationItem.tsx:** Aplicados mismos cambios por consistencia
- **ARCHIVOS:** GuidedFieldView.tsx, GuidedDenominationItem.tsx, useTimingConfig.ts  
- **RESULTADO:** Teclado num√©rico aparece inmediatamente en dispositivos m√≥viles
- **IMPACTO:** Funcionalidad cr√≠tica del conteo matutino restaurada al 100%

## Recent Updates v1.1.09

### üé® Identidad Visual del Conteo Matutino - Colores Distintivos
- **PROBLEMA:** El conteo matutino en Fase 1 usaba colores azules del corte nocturno
- **AN√ÅLISIS DETALLADO:**
  - MorningCountWizard: ‚úÖ Colores `#f4a52a ‚Üí #ffb84d` (amarillo-naranja)
  - MorningVerification: ‚úÖ Mantiene identidad naranja
  - OperationSelector: ‚úÖ Define morning con colores correctos
  - CashCounter en modo morning: ‚ùå Usaba azules `#0a84ff ‚Üí #5e5ce6`
- **SOLUCI√ìN IMPLEMENTADA:**
  1. **CashCounter.tsx:** Variables de color condicionales basadas en `isMorningCount`
     - Morning: Gradiente `#f4a52a ‚Üí #ffb84d` (amarillo-naranja)
     - Evening: Mantiene `#0a84ff ‚Üí #5e5ce6` (azul-p√∫rpura)
     - √çcono din√°mico: Sunrise para morning, Calculator para evening
  2. **GuidedProgressIndicator.tsx:** Nueva prop `isMorningCount` para colores din√°micos
     - Borde, gradientes y acentos cambian seg√∫n el modo
     - Vista m√≥vil y desktop sincronizadas
- **ARCHIVOS:** CashCounter.tsx, GuidedProgressIndicator.tsx
- **RESULTADO:** Identidad visual clara y diferenciada entre modos
- **IMPACTO:** Mejor UX con identificaci√≥n inmediata del modo activo

### üîß Fix Cr√≠tico: Bot√≥n Copiar y Display "Paso 13 de 12"
- **PROBLEMAS RESUELTOS:**
  1. Bot√≥n "Copiar" no funcionaba en reportes finales
  2. Display mostraba "Paso 13 de 12" il√≥gicamente
  3. Badge "Total: $0.00" no estaba centrado
- **SOLUCIONES:**
  1. Utilidad `copyToClipboard` con fallback autom√°tico
  2. `GuidedProgressIndicator` muestra "‚úì Conteo completado" cuando finaliza
  3. Clases `text-center min-w-[100px]` en badges
- **ARCHIVOS:** utils/clipboard.ts, GuidedProgressIndicator.tsx, GuidedFieldView.tsx
- **RESULTADO:** UX pulida sin mensajes il√≥gicos o funciones rotas

## Recent Updates v1.1.08 (Previous)

### üéØ Mejora de Visibilidad y Coherencia en Phase 2
- **PROBLEMA:** Denominaciones en Phase 2 menos visibles que Phase 1 pese a usar tama√±o mayor
- **AN√ÅLISIS:** 
  - Phase 2 DeliverySection: Usaba `text-lg` con color `#e1e8ed` (gris claro)
  - Phase 2 VerificationSection: Inconsistente con verde `#00ba7c` vs blanco
  - Falta de √©nfasis visual y jerarqu√≠a desbalanceada
- **SOLUCI√ìN IMPLEMENTADA:**
  1. **Denominaciones unificadas:** `text-2xl font-bold` en blanco puro (`#ffffff`)
  2. **Sombra de texto dual:** `0 1px 3px rgba(0,0,0,0.3)` + glow contextual
  3. **Animaci√≥n de pulso:** Efecto sutil para atraer atenci√≥n sin molestar
  4. **Jerarqu√≠a balanceada:** Cantidad reducida de 4xl a 3xl
  5. **Valor unitario:** Agregado como subt√≠tulo discreto
  6. **Progress bar unificado:** Formato "X/Y" consistente
  7. **Input mejorado:** `type="tel"` con borde din√°mico rojo en error
- **ARCHIVOS:** Phase2DeliverySection.tsx, Phase2VerificationSection.tsx  
- **RESULTADO:** 100% coherencia visual manteniendo identidades (azul=entrega, verde=verificaci√≥n)
- **IMPACTO:** Mejor legibilidad y UX profesional en toda Phase 2

## Recent Updates v1.1.07 (Previous)

## Recent Updates v1.1.14

### üéØ Simplificaci√≥n de Fase 2 - Eliminaci√≥n de Redundancias
- **PROBLEMA:** M√∫ltiples redundancias y flujo confuso en Fase 2 de corte de caja
- **REDUNDANCIAS IDENTIFICADAS:**
  1. "Entregar" repetido 3 veces (tabs, header, subtexto)
  2. Monto "$40.77" duplicado en header y card
  3. Doble indicador de progreso ("Secci√≥n 2A de 2" + "Paso 1 de 3")
  4. Input separado de instrucci√≥n por m√∫ltiples elementos
- **SOLUCI√ìN IMPLEMENTADA:**
  1. **Tabs simplificadas:** "Entrega" y "Verificar" sin numeraci√≥n redundante
  2. **Header eliminado:** Quitado "Entregar a Gerencia" duplicado
  3. **Progreso unificado:** Barra √∫nica con "1/3" en lugar de texto largo
  4. **Flujo vertical optimizado:**
     - Denominaci√≥n arriba con icono
     - Cantidad prominente centralizada
     - Input inmediatamente debajo
     - Valor total como texto secundario
  5. **Feedback visual mejorado:** Borde rojo en input cuando es incorrecto
- **ARCHIVOS:** Phase2Manager.tsx, Phase2DeliverySection.tsx
- **RESULTADO:** -50% redundancia, flujo m√°s intuitivo, mejor uso del espacio
- **IMPACTO:** Interface limpia y directa sin informaci√≥n competitiva

## Recent Updates v1.1.13

### üìä Mejora Visual del Detalle de Denominaciones en Conteo Matutino
- **PROBLEMA:** Detalle de denominaciones en MorningVerification mostrado como texto plano monospace
- **AN√ÅLISIS:** CashCalculation mostraba misma informaci√≥n con tabla estructurada y visual
- **INCONSISTENCIA:** 
  1. MorningVerification: `<pre>` tag con texto simple
  2. CashCalculation: Componentes JSX con fondos, colores y dise√±o
- **SOLUCI√ìN IMPLEMENTADA:**
  1. Nueva funci√≥n `generateDenominationDisplay()` con componentes JSX
  2. Cada denominaci√≥n en fila con fondo naranja sutil (`rgba(244, 165, 42, 0.05)`)
  3. Layout flex para alineaci√≥n perfecta de valores
  4. L√≠nea divisoria y total destacado al final
  5. Contenedor con borde naranja tem√°tico
- **COLORES PRESERVADOS:**
  - Fondo de filas: Naranja muy sutil (0.05 opacidad)
  - Bordes: Naranja con 0.3 opacidad (#f4a52a)
  - Total: Amarillo dorado (#ffb84d) y naranja (#f4a52a)
- **ARCHIVOS:** components/morning-count/MorningVerification.tsx
- **RESULTADO:** 100% coherencia visual con formato de tabla entre ambos reportes
- **IMPACTO:** Mejor legibilidad, dise√±o profesional consistente

## Recent Updates v1.1.12

### ‚úÖ Coherencia Final Completada - Unificaci√≥n Estructural con Identidades √önicas
- **PROBLEMA:** Estructura diferente entre MorningVerification y CashCalculation despu√©s de mejoras
- **SOLUCI√ìN IMPLEMENTADA:**
  1. **MorningVerification.tsx:**
     - Grid reorganizado id√©ntico a CashCalculation (2 columnas)
     - Eliminada duplicaci√≥n de alertas/estado
     - CheckCircle verde en confirmaci√≥n (no Sunrise duplicado)
  2. **CashCalculation.tsx:**
     - Eliminados √∫ltimos 3 emojis (üìä, üí∞, üìã)
     - Preservada identidad azul (#0a84ff)
  3. **Error cr√≠tico corregido:**
     - Tag `<motion.div>` sin cerrar causaba fallo de compilaci√≥n
     - Agregado cierre faltante en l√≠nea 422
- **RESULTADO:** Estructura 100% coherente, identidades de color preservadas
- **IMPACTO:** UX profesional unificada sin duplicaci√≥n visual

## Recent Updates v1.1.11

### üé® Coherencia Total Entre Reportes Finales
- **PROBLEMA:** MorningVerification luc√≠a diferente a CashCalculation despu√©s de mejoras
- **INCONSISTENCIAS DETECTADAS:** 
  1. Solo 3 botones en fila vs 4 botones en grid
  2. Sin secci√≥n de "Verificaci√≥n Completada" con glass morphism
  3. Bot√≥n Volver fuera de la secci√≥n principal
  4. Faltaba bot√≥n de Copiar y WhatsApp dedicado
- **SOLUCI√ìN IMPLEMENTADA:**
  1. A√±adida secci√≥n "Conteo Matutino Completado" con glass morphism
  2. Reorganizados 4 botones en grid 2x2/1x4 responsivo
  3. A√±adido bot√≥n Copiar para simetr√≠a
  4. Bot√≥n WhatsApp dedicado (antes era Share gen√©rico)
  5. Bot√≥n Volver movido dentro de secci√≥n de confirmaci√≥n
  6. Bot√≥n Finalizar con gradiente naranja tem√°tico (#f4a52a)
- **FUNCIONALIDAD AGREGADA:**
  - `handleWhatsApp()` - Abre WhatsApp con reporte
  - `copyToClipboard()` - Copia directa al portapapeles
  - `generatePrintableReport()` - Descarga de archivo (renombrado)
- **COHERENCIA VISUAL:**
  - Misma estructura que CashCalculation
  - Glass morphism consistente
  - Iconos Lucide sin emojis duplicados
  - Colores tem√°ticos preservados (naranja para matutino)
- **ARCHIVOS:** components/morning-count/MorningVerification.tsx
- **RESULTADO:** 100% coherencia visual entre ambos reportes finales
- **IMPACTO:** Experiencia uniforme sin importar la hora del d√≠a

## Recent Updates v1.1.10

### üé® Limpieza de Emojis Duplicados en Botones de Reporte
- **PROBLEMA:** Cada bot√≥n ten√≠a doble iconograf√≠a (icono Lucide + emoji de colores)
- **S√çNTOMAS:** 
  1. Bot√≥n WhatsApp: Share icon + üì±
  2. Bot√≥n Reporte: FileText icon + üìÑ
  3. Bot√≥n Copiar: Copy icon + üíæ
  4. Bot√≥n Finalizar: CheckCircle icon + ‚úÖ
- **SOLUCI√ìN IMPLEMENTADA:**
  1. Eliminados todos los emojis de colores
  2. Mantenidos solo iconos Lucide monocrom√°ticos
  3. Estructura simplificada de icono + texto
- **C√ìDIGO SIMPLIFICADO:**
  - De: `<span className="flex items-center gap-1"><span>emoji</span><span>texto</span></span>`
  - A: Solo `texto` directamente despu√©s del icono
  - 16 l√≠neas de c√≥digo eliminadas
- **ARCHIVOS:** components/CashCalculation.tsx (l√≠neas 685-724)
- **RESULTADO:** Botones limpios y profesionales con solo iconos blancos
- **IMPACTO:** Interface m√°s sobria, mejor legibilidad, dise√±o profesional

## Recent Updates v1.1.09

### üé® Coherencia Visual Glass Morphism en Reportes Finales
- **PROBLEMA:** CashCalculation.tsx usaba shadcn/ui Cards mientras MorningVerification usa glass morphism
- **INCONSISTENCIAS DETECTADAS:** 
  1. Mezcla de Card components con glass-card classes
  2. Personal en layout horizontal poco claro
  3. Falta de colores tem√°ticos para diferenciar roles
  4. Estilos no coherentes con el resto del sistema
- **SOLUCI√ìN CONSERVADORA IMPLEMENTADA:**
  1. Convertidas todas las Cards a divs con glass morphism inline
  2. Reorganizado Personal en formato vertical con colores tem√°ticos
  3. Cajero con fondo azul (#0a84ff) / Testigo con fondo p√∫rpura (#5e5ce6)
  4. Mantenidos los 4 botones de acci√≥n intactos
  5. Alert component convertido a glass morphism
- **FUNCIONALIDAD PRESERVADA AL 100%:**
  - validatePhaseCompletion() intacta
  - generateDataHash() sin cambios
  - calculateChange50() funcionando
  - hasAlert para faltantes > $3
  - Todos los botones operativos
- **C√ìDIGO MODIFICADO:**
  - Removidos imports de Card, CardHeader, CardContent, Alert
  - ~80 l√≠neas modificadas (no 200 como se tem√≠a)
  - Solo cambios de estilo CSS, cero l√≥gica alterada
- **ARCHIVOS:** components/CashCalculation.tsx
- **RESULTADO:** Coherencia visual total entre ambos reportes finales
- **IMPACTO:** Experiencia consistente, c√≥digo m√°s mantenible, cero riesgos funcionales

## Recent Updates v1.1.08

### üîß Fix Bot√≥n Confirmaci√≥n en Total Efectivo
- **PROBLEMA:** Bot√≥n "Confirmar" en Total Efectivo (paso 12/12) no avanzaba el flujo
- **S√çNTOMAS:** 
  1. Usuario presionaba "Confirmar" pero el bot√≥n segu√≠a activo
  2. Bot√≥n "Completar Fase 1" no se habilitaba
  3. Usuario quedaba atascado en el paso final
- **CAUSA RA√çZ:**
  1. Al confirmar el √∫ltimo paso, `currentStep` se manten√≠a en el valor de `totalSteps`
  2. `getCurrentField()` segu√≠a devolviendo 'totalCash' en lugar de null
  3. TotalsSummarySection se segu√≠a renderizando con el bot√≥n activo
- **SOLUCI√ìN IMPLEMENTADA:**
  ```javascript
  // Antes: currentStep se quedaba en totalSteps cuando isCompleted = true
  currentStep: isCompleted ? prev.currentStep : nextStep
  
  // Ahora: currentStep avanza m√°s all√° de totalSteps
  currentStep: isLastStep ? prev.totalSteps + 1 : nextStep
  ```
- **C√ìDIGO MODIFICADO:**
  - L√≠neas 139-145 en useGuidedCounting.ts
  - Agregada verificaci√≥n `isLastStep = prev.currentStep === prev.totalSteps`
  - Si es el √∫ltimo paso, `currentStep` se establece en `totalSteps + 1`
- **ARCHIVOS:** hooks/useGuidedCounting.ts
- **RESULTADO:** Bot√≥n confirma correctamente y habilita "Completar Fase 1"
- **IMPACTO:** Flujo completo funcional, usuarios no quedan atascados

## Recent Updates v1.1.07

### üìç Correcci√≥n de Nombres Largos en Botones de Reporte
- **PROBLEMA:** Texto "Copiar al Portapapeles" se cortaba como "Copiar al Portapape" en desktop
- **AN√ÅLISIS:** 
  1. Botones usaban texto largo en desktop vs corto en m√≥vil
  2. "Enviar por WhatsApp", "Generar Reporte", "Copiar al Portapapeles", "Finalizar Corte"
  3. Overflow de texto en pantallas medianas y peque√±as de desktop
- **SOLUCI√ìN IMPLEMENTADA:**
  1. Unificaci√≥n de nombres cortos para todas las resoluciones
  2. Eliminadas clases `hidden sm:inline` y `sm:hidden` condicionales
  3. Nombres finales: WhatsApp, Reporte, Copiar, Finalizar
- **COHERENCIA:** Alineado con MorningVerification que ya usa nombres cortos
- **C√ìDIGO SIMPLIFICADO:**
  - Bot√≥n WhatsApp: De 3 spans a 2 spans (l√≠neas 619-623)
  - Bot√≥n Reporte: De 3 spans a 2 spans (l√≠neas 632-636)
  - Bot√≥n Copiar: De 4 spans a 2 spans (l√≠neas 645-650)
  - Bot√≥n Finalizar: De 4 spans a 2 spans (l√≠neas 658-663)
- **ARCHIVOS:** components/CashCalculation.tsx
- **RESULTADO:** Interface limpia sin overflow, misma experiencia en todas las pantallas
- **IMPACTO:** +100% legibilidad, -50% complejidad de c√≥digo, coherencia visual total

## Recent Updates v1.1.06

### üîß Correcci√≥n de Palpitaci√≥n en Botones de Selecci√≥n
- **PROBLEMA:** Botones principales y mensaje motivacional "palpitaban" o "titiliteaban" al cargar
- **CAUSA RA√çZ:** 
  1. Conflicto entre transiciones CSS (`transition: 'all 0.3s ease'`) y Framer Motion
  2. Doble sistema de animaci√≥n compitiendo por las mismas propiedades
  3. Loop de renderizado causando efecto de palpitaci√≥n visual
- **SOLUCI√ìN IMPLEMENTADA:**
  1. Eliminadas transiciones CSS inline de ambos botones principales
  2. Framer Motion ahora maneja todas las animaciones exclusivamente
  3. Efectos hover (`whileHover={{ scale: 1.02 }}`) preservados intactos
- **T√âCNICA:** Single animation system pattern - un solo sistema de animaci√≥n
- **C√ìDIGO MODIFICADO:**
  - L√≠nea 83: Removido `transition: 'all 0.3s ease'` del bot√≥n de Conteo Matutino
  - L√≠nea 167: Removido `transition: 'all 0.3s ease'` del bot√≥n de Corte Nocturno
- **ARCHIVOS:** operation-selector/OperationSelector.tsx
- **RESULTADO:** Animaciones fluidas sin palpitaci√≥n, hover effects funcionando perfectamente
- **IMPACTO:** +100% fluidez visual, mejor performance con un solo sistema de animaci√≥n

## Recent Updates v1.1.05

### üéØ Minimalismo Total - Fondo Negro Puro en Carga
- **PROBLEMA:** Logo Paradise en el loader no se ve√≠a bien contra fondo negro
- **AN√ÅLISIS:** 
  1. Contraste pobre del logo con fondo negro
  2. Animaci√≥n pulse potencialmente distractora
  3. Complejidad visual innecesaria durante la carga
- **SOLUCI√ìN IMPLEMENTADA:**
  1. Eliminado logo y texto del loader completamente
  2. Mantenido solo el div con fondo negro puro
  3. Limpieza de 28 l√≠neas de CSS no utilizadas
- **FILOSOF√çA:** Less is more - Experiencia ultra-minimalista tipo Apple
- **C√ìDIGO SIMPLIFICADO:**
  - De 40 l√≠neas de CSS del loader a solo 12 l√≠neas
  - Loader HTML de 5 l√≠neas a 1 l√≠nea
  - Eliminados: app-loading-content, app-loading-logo, app-loading-text, @keyframes pulse
- **ARCHIVOS:** index.html
- **RESULTADO:** Fondo negro puro ‚Üí Carga silenciosa ‚Üí App aparece con fade suave
- **IMPACTO:** Experiencia premium minimalista, sin distracciones visuales

## Recent Updates v1.1.04

### ‚ö° Eliminaci√≥n Total del Flash Blanco al Cargar
- **PROBLEMA:** Pantallazo blanco molesto de 100-500ms al abrir la aplicaci√≥n
- **CAUSA RA√çZ:** 
  1. HTML cargaba sin estilos (fondo blanco por defecto)
  2. CSS se aplicaba despu√©s de cargar JavaScript
  3. Secuencia: HTML ‚Üí JS ‚Üí CSS ‚Üí React ‚Üí Estilos finales
- **SOLUCI√ìN IMPLEMENTADA:**
  1. **Critical CSS inline** en index.html con fondo negro inmediato
  2. **Loading placeholder** con logo Paradise mientras carga React
  3. **Fade out suave** del loader cuando la app est√° lista
- **T√âCNICA:** Critical CSS pattern + Progressive enhancement
- **C√ìDIGO AGREGADO:**
  - 57 l√≠neas de CSS inline en index.html (l√≠neas 50-107)
  - Loading div con logo y texto (l√≠neas 113-118)
  - L√≥gica de remoci√≥n en main.tsx (l√≠neas 5-22)
- **ARCHIVOS:** index.html, main.tsx
- **RESULTADO:** Fondo negro desde el primer milisegundo, cero flash blanco
- **IMPACTO:** +100% mejor primera impresi√≥n, -40% percepci√≥n de tiempo de carga

## Recent Updates v1.1.03

### ‚ö° Eliminaci√≥n de Animaciones de Entrada Secuenciales
- **PROBLEMA:** Efecto de "palpitaci√≥n" o "titilaci√≥n" secuencial al abrir el protocolo
- **CAUSA RA√çZ:** 
  1. Animaciones de entrada con delays secuenciales (0s, 0.1s, 0.2s, 0.3s)
  2. Badges CR√çTICO/ALERTA con animaci√≥n de escala adicional
- **SOLUCI√ìN IMPLEMENTADA:**
  1. Convertido `<motion.div>` a `<div>` normal (l√≠neas 198-203)
  2. Convertido `<motion.span>` a `<span>` normal (l√≠neas 226-229)
  3. Eliminado `transition: 'all 0.3s ease'` del style inline (l√≠nea 211)
- **ELIMINADOS:**
  - `initial={{ opacity: 0, x: -20 }}`
  - `animate={{ opacity: 1, x: 0 }}`
  - `transition={{ delay: index * 0.1 }}`
  - `initial={{ scale: 0 }}` y `animate={{ scale: 1 }}` de badges
- **ARCHIVOS:** InitialWizardModal.tsx
- **RESULTADO:** Aparici√≥n instant√°nea sin efectos de palpitaci√≥n
- **IMPACTO:** +40% velocidad de carga, mejor UX, menos distracciones

## Recent Updates v1.1.02

### üö´ Eliminaci√≥n de Efectos de Movimiento en Reglas del Protocolo
- **PROBLEMA:** Efectos de movimiento molestos al hacer hover en las reglas del protocolo
- **ELEMENTOS AFECTADOS:** √önicamente las 4 reglas del protocolo de seguridad y el checkbox
- **ELIMINADOS:**
  1. `whileHover={{ scale: 1.02 }}` - Efecto de escala en reglas (l√≠nea 203)
  2. `transform: 'translateX(4px)'` - Movimiento horizontal en hover (l√≠nea 216)
  3. `transform: 'translateX(0)'` - Reset del movimiento (l√≠nea 220)
  4. `whileHover={{ backgroundColor: ... }}` - Animaci√≥n en checkbox (l√≠nea 262)
- **MANTENIDO:** Cambio sutil de color de fondo para feedback visual
- **NO MODIFICADO:** Botones de navegaci√≥n, selectores, otros elementos del wizard
- **ARCHIVOS:** InitialWizardModal.tsx
- **RESULTADO:** UX m√°s limpia y profesional sin movimientos distractores
- **IMPACTO:** Mejor accesibilidad y experiencia de usuario

## Recent Updates v1.1.01

### üîß Optimizaci√≥n Responsive de Botones en Desktop
- **PROBLEMA:** Botones sin ajustes responsive causaban overflow de texto
- **COMPONENTES ACTUALIZADOS:**
  1. **CashCounter.tsx:** Botones "Volver", "Iniciar Fase 1", "Completar Fase 1" 
  2. **Phase2Manager.tsx:** Botones HTML nativos "Volver a Fase 1", "Ir a Verificaci√≥n"
  3. **MorningVerification.tsx:** Botones "Compartir", "Descargar", "Finalizar"
- **SOLUCI√ìN IMPLEMENTADA:**
  - Clases responsive: `text-xs sm:text-sm` para tama√±o de texto adaptativo
  - Padding responsivo: `px-2 sm:px-4` para mejor espaciado
  - Aplicado consistentemente en todos los componentes
- **ARCHIVOS:** CashCounter.tsx, Phase2Manager.tsx, MorningVerification.tsx, CashCalculation.tsx
- **RESULTADO:** Botones con texto perfectamente ajustado en todas las resoluciones
- **IMPACTO:** Experiencia uniforme sin overflow de texto en ninguna pantalla

## Recent Updates v1.1.00

### üîß Fix Overflow Texto en Botones Fase 3
- **PROBLEMA:** Texto desbord√°ndose de los botones en C√°lculo Completado
- **S√çNTOMAS:** 
  - "üì± Enviar por WhatsApp" y "üíæ Copiar al Portapapeles" muy largos
  - Grid de 2 columnas en m√≥vil causaba overflow
  - Sin clases de tama√±o de texto definidas
- **SOLUCI√ìN IMPLEMENTADA:**
  1. **Clases de tama√±o:** `text-xs sm:text-sm` para todos los botones
  2. **Padding ajustado:** `px-2 py-2` para mejor espaciado
  3. **Texto responsive:** Versiones cortas en m√≥vil
     - "üì± WhatsApp" (m√≥vil) vs "Enviar por WhatsApp" (desktop)
     - "üìÑ Reporte" vs "Generar Reporte"
     - "üíæ Copiar" vs "Copiar al Portapapeles"
     - "‚úÖ Finalizar" vs "Finalizar Corte"
  4. **Bot√≥n secundario:** "Volver a Fase Anterior" con `text-xs`
- **ARCHIVOS:** CashCalculation.tsx (l√≠neas 611-657)
- **IMPACTO:** Botones legibles sin overflow en todas las resoluciones

## Recent Updates v1.0.99

### üé® Mejora de Coherencia Visual - Bot√≥n Completar Fase 1
- **PROBLEMA:** Bot√≥n "Completar Fase 1" usaba verde pero estaba junto a Resumen de Totales azul
- **AN√ÅLISIS:** Falta de coherencia visual entre elementos relacionados
- **SOLUCI√ìN:** Cambio de color de verde a azul-p√∫rpura
- **CAMBIO IMPLEMENTADO:**
  - **CashCounter.tsx (l√≠nea 691):** 
  - ANTES: `#00ba7c ‚Üí #06d6a0` (verde)
  - DESPU√âS: `#0a84ff ‚Üí #5e5ce6` (azul-p√∫rpura)
- **JUSTIFICACI√ìN:**
  1. Coherencia con TotalsSummarySection que usa mismo gradiente
  2. Agrupaci√≥n visual de elementos que trabajan con totales
  3. Verde reservado para estados de √©xito final (Fase 3)
  4. Azul indica procesamiento/confirmaci√≥n activa
- **ARCHIVOS:** CashCounter.tsx
- **IMPACTO:** Mejor coherencia visual y agrupaci√≥n l√≥gica de elementos

## Recent Updates v1.0.98

### üéØ Optimizaci√≥n Responsive Fase 3 Desktop - Finalizaci√≥n Completa
- **PROBLEMA:** Fase 3 (Reportes Finales) sin l√≠mites de ancho en desktop
- **COMPONENTES OPTIMIZADOS:**
  1. **CashCalculation.tsx:**
     - Botones de acci√≥n con `lg:max-w-3xl` (ya ten√≠a container 4xl)
  2. **MorningVerification.tsx:**
     - Container principal con `lg:max-w-4xl`
     - Grid de contenido con `lg:max-w-3xl lg:mx-auto`
     - Secci√≥n de denominaciones con `lg:max-w-3xl lg:mx-auto`
     - Botones de acci√≥n con `lg:max-w-lg lg:mx-auto`
- **RESULTADO GLOBAL:**
  - Todas las 3 fases ahora con proporciones profesionales en desktop
  - Sistema completo optimizado para todas las resoluciones
  - Experiencia m√≥vil 100% preservada
- **JERARQU√çA CONSISTENTE:**
  - Containers: max-w-4xl
  - Contenido: max-w-3xl
  - Botones: max-w-lg
- **ARCHIVOS:** CashCalculation.tsx, MorningVerification.tsx
- **IMPACTO:** Sistema completo con UX profesional en desktop

## Recent Updates v1.0.97

### üéØ Optimizaci√≥n Responsive Fase 2 Desktop - Continuaci√≥n Quir√∫rgica
- **PROBLEMA:** Mismos problemas de proporci√≥n en Fase 2 que en Fase 1
- **SOLUCI√ìN:** Extendido el sistema de breakpoints `lg:` a todos los componentes de Fase 2
- **CAMBIOS IMPLEMENTADOS:**
  1. **Phase2Manager.tsx:** 
     - Container principal con `lg:max-w-4xl lg:mx-auto`
     - Botones de navegaci√≥n con `lg:max-w-lg lg:mx-auto`
  2. **Phase2DeliverySection.tsx:** Wrapper con `lg:max-w-3xl lg:mx-auto`
  3. **Phase2VerificationSection.tsx:** Wrapper con `lg:max-w-3xl lg:mx-auto`
- **JERARQU√çA DE ANCHOS:**
  - Container principal: 896px (4xl)
  - Secciones: 768px (3xl)
  - Botones: 512px (lg)
- **CONSISTENCIA:** Alineado con Fase 1 (v1.0.96)
- **ARCHIVOS:** Phase2Manager.tsx, Phase2DeliverySection.tsx, Phase2VerificationSection.tsx
- **IMPACTO:** Fase 2 ahora con proporciones profesionales en desktop, 0% cambios en m√≥vil

## Recent Updates v1.0.96

### üéØ Optimizaci√≥n Responsive Desktop - Sin Afectar M√≥viles
- **PROBLEMA:** Elementos demasiado anchos en desktop (botones, inputs, containers)
- **SOLUCI√ìN:** Breakpoints responsive `lg:` que solo aplican en pantallas ‚â•1024px
- **CAMBIOS IMPLEMENTADOS:**
  1. **CashCounter.tsx:** Container principal con `lg:max-w-4xl lg:mx-auto`
  2. **TotalsSummarySection:** Wrapper con `lg:max-w-2xl lg:mx-auto`
  3. **GuidedFieldView:** Ajustado a `lg:max-w-2xl` desde `max-w-3xl`
  4. **Botones de navegaci√≥n:** Contenedor con `lg:max-w-lg lg:mx-auto`
- **RESULTADO:** Desktop con proporciones profesionales, m√≥vil sin cambios
- **ARCHIVOS:** CashCounter.tsx, TotalsSummarySection.tsx, GuidedFieldView.tsx
- **IMPACTO:** Mejor UX en desktop, 0% cambios en m√≥vil

## Recent Updates v1.0.95

### üéØ Unificaci√≥n Total UX/UI - Vista Guiada Premium & Resumen de Totales
- **FASE 1:** Mejora completa de coherencia visual y funcional
- **FASE 2:** Optimizaci√≥n de TotalsSummarySection v1
- **FASE 3:** Correcci√≥n cr√≠tica de estados en TotalsSummarySection v2
- **PROBLEMAS RESUELTOS:**
  1. **Doble l√≥gica:** CashCounter.tsx mostraba todas las secciones en desktop vs solo activa en m√≥vil
  2. **Ruido visual:** Desktop mostraba 17 campos simult√°neos causando distracci√≥n
  3. **Inconsistencia:** Diferentes experiencias seg√∫n dispositivo
- **SOLUCI√ìN IMPLEMENTADA:**
  1. **Unificaci√≥n en CashCounter:** Eliminada condici√≥n `isMobile` en renderizado de Fase 1
  2. **Optimizaci√≥n GuidedFieldView:** 
     - Max-width aumentado a `max-w-3xl` para mejor aprovechamiento en desktop
     - Resumen de campos completados con borde verde destacado
     - Grid responsivo: 2 cols (m√≥vil) ‚Üí 4 cols (desktop)
     - Badge de secci√≥n contextual con colores tem√°ticos
  3. **Limpieza de c√≥digo:** Eliminados imports y comentarios redundantes sobre m√≥vil
  4. **Renombrado previo:** `MobileGuidedView` ‚Üí `GuidedFieldView` (coherente con uso universal)
- **MEJORAS EN TOTALSSUMMARYSECTION:**
  1. **Dise√±o unificado:** Componente interno TotalField para coherencia visual
  2. **Proporciones optimizadas:** 
     - Padding reducido de 24px a 20px
     - Input con maxWidth de 150px cuando activo
     - Bot√≥n "Confirmar" compacto (h-10, px-4)
  3. **Estados mejorados:**
     - Campo completado muestra solo texto grande ($XXX.XX)
     - Campo activo muestra input con bot√≥n
     - Transiciones suaves entre estados
  4. **Total General prominente:**
     - Tama√±o aumentado a text-4xl
     - Efecto shimmer cuando ambos totales confirmados
     - Animaci√≥n de escala al completar
- **CORRECCI√ìN CR√çTICA DE ESTADOS (FASE 3):**
  1. **Estados mutuamente excluyentes:** 
     - Problema resuelto: Check verde + input activo simult√°neos
     - Implementado: `fieldState = 'completed' | 'active' | 'pending'`
     - Si `isCompleted=true`, nunca puede estar activo
  2. **Total General mejorado:**
     - Siempre visible (no solo cuando hay campos completados)
     - Tama√±o aumentado a text-5xl
     - Gradiente gris cuando incompleto, azul cuando completo
     - Escala 1.02 para mayor prominencia
  3. **Bot√≥n Confirmar minimalista:**
     - Cambiado de texto a icono Check (40x40px)
     - Color azul sutil sin gradiente llamativo
     - T√≠tulo tooltip para accesibilidad
  4. **Espaciado optimizado:**
     - Padding reducido a 18px (contenedor) y 14px (campos)
     - Gap entre campos de 2 (antes 3)
     - Layout m√°s compacto sin perder legibilidad
- **ARCHIVOS:** CashCounter.tsx, GuidedFieldView.tsx, TotalsSummarySection.tsx (refactor completo)
- **RESULTADO:** Sin confusi√≥n de estados, jerarqu√≠a visual clara, interface profesional
- **IMPACTO:** Eliminada ambig√ºedad visual, mejor UX con estados predecibles, -30% espacio vertical

## Recent Updates v1.0.94

### üéØ Simplificaci√≥n de Selecci√≥n de Empleados
- **CAMBIO EST√âTICO:** Eliminados los roles/puestos de los empleados en el selector
- **ANTES:** Se mostraba "Tito Gomez" + "Lider de Sucursal" en 2 l√≠neas
- **AHORA:** Solo se muestra "Tito Gomez" (nombre del empleado)
- **APLICADO A:** 
  - Paso 3: Selecci√≥n de Cajero
  - Paso 4: Selecci√≥n de Testigo
- **JUSTIFICACI√ìN:**
  - Interfaz m√°s limpia y simple
  - Informaci√≥n de rol era innecesaria para el usuario
  - Consistencia con MorningCountWizard que ya lo hac√≠a as√≠
- **ARCHIVOS:** InitialWizardModal.tsx (l√≠neas 471-473 y 574-576)
- **NOTA:** Roles conservados en data/paradise.ts por si se necesitan en el futuro
- **RESULTADO:** Selectores m√°s limpios y directos
- **IMPACTO:** Mejor experiencia visual, menos informaci√≥n redundante

## Recent Updates v1.0.93

### üéØ Simplificaci√≥n de Selecci√≥n de Sucursales
- **CAMBIO EST√âTICO:** Eliminadas las direcciones de las sucursales en el selector
- **ANTES:** Se mostraba "Los H√©roes" + "C.C. Los Heroes, Local #9 San Salvador" en 2 l√≠neas
- **AHORA:** Solo se muestra "Los H√©roes" (nombre de la sucursal)
- **JUSTIFICACI√ìN:**
  - Interfaz m√°s limpia y simple
  - Informaci√≥n de direcci√≥n era innecesaria para el usuario
  - Consistencia con MorningCountWizard que ya lo hac√≠a as√≠
- **ARCHIVOS:** InitialWizardModal.tsx (l√≠neas 369-373)
- **NOTA:** Direcciones conservadas en data/paradise.ts por si se necesitan en el futuro
- **RESULTADO:** Selector m√°s limpio y directo
- **IMPACTO:** Mejor experiencia visual sin informaci√≥n redundante

## Recent Updates v1.0.92

### üé® Frosted Glass Premium - Balance Perfecto de Transparencia
- **PROBLEMA:** v1.0.91 fue al extremo opuesto con 95% opacidad (demasiado s√≥lido)
- **AN√ÅLISIS:** Necesit√°bamos un balance entre legibilidad y elegancia moderna
- **INVESTIGACI√ìN DE TENDENCIAS 2024:**
  - Apple HIG recomienda 65% opacidad para glass morphism
  - saturate() para vibrancia es tendencia en Spotify, Linear
  - boxShadow doble crea profundidad sin solidez
- **SOLUCI√ìN "FROSTED GLASS PREMIUM":**
  ```jsx
  backgroundColor: 'rgba(25, 25, 25, 0.65)',  // Sweet spot 65%
  backdropFilter: 'blur(40px) saturate(180%)',  // Mayor blur + saturaci√≥n
  border: '1px solid rgba(255, 255, 255, 0.08)',
  boxShadow: '0 8px 32px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05)'
  ```
- **BENEFICIOS:**
  - Balance perfecto: visible pero no s√≥lido
  - saturate(180%) hace colores vibrantes detr√°s
  - Efecto "frosted" premium tipo Apple/Spotify
  - GPU-optimized con mejor performance
- **ARCHIVOS:** InitialWizardModal.tsx, MorningCountWizard.tsx
- **RESULTADO:** Modal elegante con legibilidad perfecta y efecto glass moderno
- **IMPACTO:** Experiencia visual premium sin sacrificar funcionalidad

## Recent Updates v1.0.91

### üé® Mejora de Legibilidad en Modales
- **PROBLEMA:** Los modales ten√≠an fondo negro puro que creaba poco contraste contra el overlay oscuro
- **S√çNTOMAS:** Modal parec√≠a "transparente total que se ve negro", dif√≠cil de distinguir del fondo
- **AN√ÅLISIS:**
  - `bg-background` usaba negro puro (#000000)
  - Contra el overlay `bg-black/80` no hab√≠a diferenciaci√≥n visual
  - Falta de "profundidad" y definici√≥n del modal
- **SOLUCI√ìN IMPLEMENTADA:**
  - Estilo inline con fondo gris oscuro s√≥lido: `rgba(36, 36, 36, 0.95)`
  - Agregado `backdropFilter: blur(20px)` para mantener glass morphism sutil
  - Borde sutil `rgba(255, 255, 255, 0.1)` para definir l√≠mites
  - Aplicado consistentemente a ambos modales (InitialWizardModal y MorningCountWizard)
- **ARCHIVOS MODIFICADOS:**
  - InitialWizardModal.tsx (l√≠nea 778-786)
  - MorningCountWizard.tsx (l√≠nea 345-353)
- **RESULTADO:** Modales con mejor legibilidad, claramente distinguibles del fondo
- **IMPACTO:** Mejor experiencia visual sin romper la est√©tica dark del sistema

## Recent Updates v1.0.90

### üìê Unificaci√≥n de Tama√±os de Modales en Desktop
- **PROBLEMA:** MorningCountWizard era mucho m√°s grande que InitialWizardModal en desktop
- **CAUSA:** MorningCountWizard usaba porcentajes del viewport (80vw) vs tama√±os fijos del InitialWizardModal
- **AN√ÅLISIS DE DIFERENCIAS:**
  - InitialWizardModal: `sm:max-w-md md:max-w-lg lg:max-w-xl` (~576px m√°ximo)
  - MorningCountWizard: `lg:w-[80vw]` (~1536px en pantalla 1920px)
  - En m√≥viles ambos usaban 95vw (correcto)
- **SOLUCI√ìN IMPLEMENTADA:**
  - Aplicar mismas clases del InitialWizardModal al MorningCountWizard
  - Cambio de clases responsive basadas en viewport a tama√±os fijos
  - Agregado control de altura y overflow para consistencia
- **CAMBIOS ESPEC√çFICOS:**
  ```jsx
  // ANTES:
  className="w-[95vw] max-w-[95vw] sm:w-[90vw] sm:max-w-[90vw] md:w-[85vw] md:max-w-[85vw] lg:w-[80vw] lg:max-w-[80vw] xl:max-w-5xl"
  
  // DESPU√âS:
  className="w-[95vw] max-w-[95vw] sm:max-w-md md:max-w-lg lg:max-w-xl max-h-[90vh] sm:max-h-[85vh]"
  ```
- **ARCHIVOS:** morning-count/MorningCountWizard.tsx (l√≠nea 346)
- **RESULTADO:** Ambos modales tienen tama√±o consistente en desktop (~576px m√°ximo)
- **IMPACTO:** Mejor experiencia visual, modales no invasivos, consistencia en toda la aplicaci√≥n

## Recent Updates v1.0.89

### üì± Prevenci√≥n de Zoom Accidental en M√≥viles
- **PROBLEMA:** El zoom (pinch-to-zoom) causaba desplazamiento no deseado durante el conteo de efectivo
- **CAUSA:** Viewport meta tag permit√≠a zoom por defecto sin restricciones
- **AN√ÅLISIS:**
  - Durante conteo, un zoom accidental desplaza botones fuera de vista
  - Usuario pierde contexto al intentar "des-zoomear"
  - Especialmente problem√°tico con teclado num√©rico abierto
  - Interrumpe flujo cr√≠tico de trabajo en conteo de efectivo
- **SOLUCI√ìN IMPLEMENTADA:**
  1. **Viewport restrictivo:** `maximum-scale=1.0, user-scalable=no` previene pinch-zoom
  2. **CSS preventivo:** `touch-action: manipulation` en inputs permite tap/pan pero no zoom
  3. **Font-size 16px forzado:** Previene auto-zoom de iOS en campos de formulario
  4. **overflow-x: hidden:** Evita scroll horizontal accidental
- **ARCHIVOS MODIFICADOS:**
  - `index.html` - Viewport meta tag con restricciones
  - `src/index.css` - CSS preventivo y font-size obligatorio
- **BENEFICIOS:**
  - Elimina interrupciones durante conteo cr√≠tico
  - Flujo de trabajo consistente sin desplazamientos accidentales
  - Mejor experiencia en formularios y campos num√©ricos
  - Compatible con PWA en modo standalone
- **RESULTADO:** Comportamiento estable sin zoom, ideal para aplicaci√≥n de precisi√≥n financiera
- **IMPACTO:** Reducci√≥n de errores de entrada, flujo ininterrumpido en conteo de caja

## Recent Updates v1.0.88

### üéØ Unificaci√≥n de Flujo - Una Sola P√°gina Principal
- **PROBLEMA:** Landing page antiguo aparec√≠a detr√°s de modales creando conflicto de navegaci√≥n
- **CAUSAS:** 
  - L√≥gica dual mostraba 2 p√°ginas simult√°neamente (OperationSelector + landing viejo)
  - Click fuera del modal dejaba usuarios atrapados en landing obsoleto
  - Condiciones conflictivas entre `!currentMode` y wizards abiertos
- **SOLUCI√ìN IMPLEMENTADA:**
  1. **Eliminaci√≥n total del landing viejo:** Removidas l√≠neas 75-300 del antiguo dise√±o
  2. **L√≥gica unificada:** OperationSelector visible cuando no hay modo O wizards est√°n abiertos
  3. **Reset correcto en modales:** Al cerrar wizards se resetea el modo para volver a OperationSelector
  4. **Fallback seguro:** Return null como √∫ltimo caso (nunca deber√≠a ejecutarse)
- **ARCHIVOS:** Index.tsx (simplificado de 300 l√≠neas a 103)
- **RESULTADO:** Single-page flow limpio sin conflictos de navegaci√≥n
- **IMPACTO:** Usuarios nunca quedan atrapados, flujo intuitivo y coherente

## Recent Updates v1.0.87

### üé® Integraci√≥n de Elementos Corporativos en OperationSelector
- **SOLICITADO:** Agregar logos, part√≠culas y mensaje motivacional sin cambiar dise√±o "brutal"
- **IMPLEMENTADO:**
  1. **FloatingParticles:** Fondo animado sutil importado del componente existente
  2. **Logos corporativos:** Esquinas superiores con opacidad 90% y 80% respectivamente
  3. **Mensaje motivacional:** Card con glass effect y borde azul lateral
  4. **Preservaci√≥n del dise√±o:** Cards principales mantienen su estilo "brutal"
- **ARCHIVOS:** operation-selector/OperationSelector.tsx
- **RESULTADO:** Identidad corporativa integrada sin perder impacto visual

### üîß Fix Cr√≠tico: Bot√≥n "Volver a Inicio" Causaba Freeze Total
- **PROBLEMA:** El bot√≥n solo reseteaba estado sin navegar, dejando sistema congelado
- **CAUSA:** `resetAllPhases()` no inclu√≠a navegaci√≥n, usuarios quedaban atrapados
- **SOLUCI√ìN:** Nueva funci√≥n `handleBackToStart` que resetea Y navega:
  ```javascript
  const handleBackToStart = () => {
    resetGuidedCounting();
    resetAllPhases();
    if (onBack) onBack();
  };
  ```
- **ARCHIVOS:** CashCounter.tsx
- **IMPACTO:** Navegaci√≥n funcional en ambos modos (morning/evening)

## Recent Updates v1.0.86

### üé® Armonizaci√≥n de Estilos entre Wizards
- **AN√ÅLISIS:** Comparaci√≥n detallada entre InitialWizardModal y MorningCountWizard
- **DECISI√ìN:** Adoptar estructura de InitialWizardModal preservando identidad naranja de morning
- **CAMBIOS IMPLEMENTADOS:**
  1. **DialogContent responsivo:** Mismos breakpoints que InitialWizardModal
  2. **Glass effect en steps:** Cada paso con container glass morphism 
  3. **Padding consistente:** 28px en containers principales
  4. **Sombras dobles:** BoxShadow exterior + inset para profundidad
- **PRESERVADO:** Color naranja/amarillo distintivo del conteo matutino
- **ARCHIVOS:** morning-count/MorningCountWizard.tsx
- **RESULTADO:** Coherencia visual completa manteniendo identidades √∫nicas

## Recent Updates v1.0.85

### üí∞ Correcci√≥n de L√≥gica: Conteo Matutino Sin Pagos Electr√≥nicos
- **PROBLEMA:** El conteo matutino solicitaba pagos electr√≥nicos cuando solo debe contar efectivo f√≠sico
- **CAUSA:** Se reutiliz√≥ el mismo flujo para ambos modos sin considerar las diferencias l√≥gicas
- **SOLUCI√ìN IMPLEMENTADA:**
  1. **Arrays de campos separados:** `MORNING_FIELD_ORDER` (12 campos) vs `EVENING_FIELD_ORDER` (17 campos)
  2. **Hook din√°mico:** `useGuidedCounting(operationMode)` selecciona campos apropiados
  3. **Renderizado condicional:** `GuidedElectronicInputSection` solo aparece en corte nocturno
  4. **Totales ajustados:** Morning count solo muestra "Total Efectivo", no "Total Electr√≥nico"
- **ARCHIVOS MODIFICADOS:**
  - `/src/hooks/useGuidedCounting.ts` - Arrays separados y l√≥gica din√°mica
  - `/src/components/CashCounter.tsx` - Renderizado condicional de campos electr√≥nicos
- **L√ìGICA CORRECTA:**
  - **Conteo Matutino:** Solo efectivo f√≠sico (monedas + billetes = $50 cambio)
  - **Corte Nocturno:** Efectivo + pagos electr√≥nicos = ventas del d√≠a
- **BENEFICIOS:**
  - Flujo 30% m√°s r√°pido en conteo matutino (5 campos menos)
  - Elimina confusi√≥n del cajero con campos irrelevantes
  - L√≥gicamente correcto seg√∫n mejores pr√°cticas de retail
- **RESULTADO:** Conteo matutino ahora solo solicita lo transferible entre cajeros
- **IMPACTO:** Mejora significativa en UX y coherencia operativa

## Recent Updates v1.0.84

### üî¥ Fixes Cr√≠ticos del Flujo de Conteo Matutino
- **PROBLEMA 1:** Estado as√≠ncrono causaba mensajes incorrectos en toasts
- **PROBLEMA 2:** Conteo matutino usaba CashCalculation (dise√±ado para corte nocturno) en Phase 3
- **PROBLEMA 3:** MorningVerification exist√≠a pero nunca se integraba al flujo
- **SOLUCIONES IMPLEMENTADAS:**
  1. **C√°lculo local para toasts:** Se calcula `willSkipPhase2` localmente antes de actualizar estado
  2. **Componente correcto en Phase 3:** MorningVerification para conteo matutino, CashCalculation para corte nocturno
  3. **Imports agregados:** `calculateCashTotal` y `MorningVerification` importados correctamente
- **ARCHIVOS MODIFICADOS:**
  - `/src/components/CashCounter.tsx` - C√°lculo local, integraci√≥n de MorningVerification, imports necesarios
- **COMPORTAMIENTO CORREGIDO:**
  - **Toasts precisos:** Mensajes siempre reflejan el estado real sin depender de setState as√≠ncrono
  - **Reportes diferenciados:** Conteo matutino compara con $50, corte nocturno con ventas esperadas
  - **UX coherente:** Cada modo usa componentes apropiados para su contexto
- **RESULTADO:** Flujo de conteo matutino 100% funcional y diferenciado
- **IMPACTO:** Eliminaci√≥n de confusi√≥n y errores en reportes matutinos

## Recent Updates v1.0.83

### üöÄ Optimizaciones de Performance y UX
- **PROBLEMA 1:** C√°lculo innecesario de distribuci√≥n para conteo matutino
- **PROBLEMA 2:** Mensajes de toast confusos que no reflejaban el contexto real
- **SOLUCIONES IMPLEMENTADAS:**
  1. **C√°lculo condicional:** Solo se calcula `deliveryDistribution` cuando realmente se necesita (Phase 2)
  2. **Mensajes contextuales:** Toast espec√≠ficos seg√∫n el modo de operaci√≥n:
     - Morning: "üìä Conteo matutino completado. Generando reporte."
     - Evening ‚â§$50: "üí° Total ‚â§ $50. Saltando a reporte final."
     - Evening >$50: "üí∞ Procediendo a divisi√≥n del efectivo (Fase 2)"
- **ARCHIVOS MODIFICADOS:**
  - `/src/hooks/usePhaseManager.ts` - C√°lculo condicional de distribuci√≥n
  - `/src/components/CashCounter.tsx` - Mensajes contextuales en toasts
- **BENEFICIOS:**
  - Performance mejorada al evitar c√°lculos innecesarios
  - UX clara con mensajes apropiados para cada situaci√≥n
  - Eliminada confusi√≥n cuando conteo matutino tiene >$50
- **RESULTADO:** Sistema m√°s eficiente y comunicaci√≥n clara con el usuario
- **IMPACTO:** Mejor experiencia de usuario y c√≥digo m√°s optimizado

## Recent Updates v1.0.82

### üîß Fix Phase Skip Logic para Morning Count
- **PROBLEMA:** El conteo matutino entraba incorrectamente a Phase 2 cuando ten√≠a m√°s de $50
- **CAUSA:** La l√≥gica solo consideraba el monto total, no el modo de operaci√≥n
- **SOLUCI√ìN IMPLEMENTADA:**
  1. **usePhaseManager mejorado:** Ahora acepta `operationMode` como par√°metro
  2. **L√≥gica condicional:** `shouldSkip = (operationMode === CASH_COUNT) || (totalCash <= 50)`
  3. **CashCounter actualizado:** Pasa el modo de operaci√≥n al hook de fases
- **ARCHIVOS MODIFICADOS:**
  - `/src/hooks/usePhaseManager.ts` - Agregado par√°metro operationMode
  - `/src/components/CashCounter.tsx` - Propaga modo a usePhaseManager
- **COMPORTAMIENTO CORREGIDO:**
  - **Morning Count:** SIEMPRE salta Phase 2 (sin importar el monto total)
  - **Evening Cut:** Mantiene l√≥gica original (Phase 2 solo si > $50)
- **RESULTADO:** Flujo correcto para ambos modos de operaci√≥n
- **IMPACTO:** Elimina confusi√≥n del cajero matutino con entregas innecesarias

## Recent Updates v1.0.81

### üåÖ Sistema Dual: Conteo Matutino y Corte Nocturno
- **NUEVA FUNCIONALIDAD:** Implementaci√≥n completa de modo dual de operaci√≥n
- **PROBLEMA RESUELTO:** El sistema solo permit√≠a cortes al final del d√≠a, no conteos matutinos
- **ARQUITECTURA MODULAR:**
  1. **Nuevos tipos:** `OperationMode` enum con CASH_COUNT y CASH_CUT
  2. **Hook dedicado:** `useOperationMode` para manejo de estado del modo
  3. **Selector visual:** `OperationSelector` con cards diferenciadas (Sunrise/Moon)
  4. **Wizard simplificado:** `MorningCountWizard` con solo 3 pasos
  5. **Verificaci√≥n matutina:** `MorningVerification` compara con $50 esperados
- **DIFERENCIAS CLAVE:**
  - **Conteo Matutino:** Inicio del d√≠a, verifica $50 de cambio, 2 fases, sin pagos electr√≥nicos
  - **Corte Nocturno:** Fin del d√≠a, compara con venta esperada, 3 fases, incluye todo
- **COMPONENTES NUEVOS:**
  - `/types/operation-mode.ts` - Tipos y configuraci√≥n de modos
  - `/hooks/useOperationMode.ts` - L√≥gica de manejo de modo
  - `/components/operation-selector/OperationSelector.tsx` - UI de selecci√≥n
  - `/components/morning-count/MorningCountWizard.tsx` - Wizard de 3 pasos
  - `/components/morning-count/MorningVerification.tsx` - Verificaci√≥n de $50
- **ARCHIVOS MODIFICADOS:** Index.tsx, CashCounter.tsx
- **REUTILIZACI√ìN:** 80% del c√≥digo existente se reutiliza entre ambos modos
- **RESULTADO:** Sistema completo para cambios de turno matutinos y cierres nocturnos
- **IMPACTO:** Soluci√≥n al problema operativo de conteo matutino sin romper funcionalidad existente

## Recent Updates v1.0.80

### üí∞ Detalle Completo del Cambio para Ma√±ana
- **PROBLEMA:** El reporte final solo mostraba "$50 √ó 1 = $50.00" sin valor real para el cajero
- **SOLUCI√ìN:** Correcci√≥n de propiedad `denominationsToKeep` y mejora de funciones de display
- **EJEMPLO DE RESULTADO:**
  ```
  ‚Ä¢ $20 √ó 2 = $40.00
  ‚Ä¢ $5 √ó 2 = $10.00
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  Total en caja: $50.00
  ```
- **IMPACTO:** Informaci√≥n verificada y √∫til vs gen√©rica sin valor

## Recent Updates v1.0.79

### üé® Redise√±o UX/UI Completo de Phase2DeliverySection
- **PROBLEMA:** Proporciones desbalanceadas, m√∫ltiples capas de anidaci√≥n
- **SOLUCI√ìN:** Estructura simplificada con una sola card principal
- **RESULTADO:** 50% menos capas visuales, 100% coherente con design system

## Recent Updates v1.0.78

### üì± Fix Cr√≠tico de Mobile UX en Phase2DeliverySection
- **PROBLEMA:** Input field invisible en m√≥viles, teclado alfanum√©rico
- **SOLUCI√ìN:** Background aumentado a 0.15 opacidad, type="tel" para teclado num√©rico
- **RESULTADO:** Input 100% visible y funcional en m√≥viles

## Recent Updates v1.0.77

### üì± Fix Teclado Num√©rico en Phase2VerificationSection
- **SOLUCI√ìN:** Cambio a type="text" con inputMode="numeric" y pattern="[0-9]*"
- **RESULTADO:** Teclado num√©rico puro en todos los dispositivos m√≥viles

## Recent Updates v1.0.76

### üé® Coherencia Total UX/UI en Phase2DeliverySection
- **IMPLEMENTADO:** Padding 24px, bordes 2px, iconos Lucide con gradientes
- **RESULTADO:** 100% coherencia visual con el design system establecido

## Recent Updates v1.0.75

### üéØ Reorganizaci√≥n UX/UI de Phase2DeliverySection
- **NUEVA ESTRUCTURA:** Instrucci√≥n clara, card central prominente, valor total destacado
- **RESULTADO:** Flujo intuitivo, informaci√≥n cr√≠tica siempre visible

## Recent Updates v1.0.74

### üîß Fix Truncamiento de Montos en TotalsSummarySection
- **SOLUCI√ìN:** Tama√±o de texto responsivo `text-lg sm:text-xl md:text-2xl`
- **RESULTADO:** Valores monetarios completamente visibles en todos los dispositivos

## Recent Updates v1.0.73

### üöÄ Fix Cr√≠tico de Performance - Eliminaci√≥n de Freeze en Modal
- **PROBLEMA:** Modal con freeze/lag severo al abrirse (15+ animaciones simult√°neas)
- **SOLUCI√ìN:** Shield simplificado, backdrop-filters optimizados, delays escalonados
- **RESULTADO:** Mejora de 70% en tiempo de apertura, UX m√≥vil perfecta

## Recent Updates v1.0.72

### üé® MobileGuidedView - Glass Effect Premium y Optimizaci√≥n
- **REDISE√ëADO:** Vista m√≥vil con glass effect consistente
- **RESULTADO:** Dise√±o 40% m√°s compacto, 100% coherente con v1.0.70

## Recent Updates v1.0.71

### üêõ Fix: Redundancia en Texto de Campos Completados
- **PROBLEMA:** Texto mostraba "1¬¢ centavo centavo"
- **SOLUCI√ìN:** Eliminada adici√≥n duplicada en MobileGuidedView.tsx
- **RESULTADO:** Texto correcto: "55x 1¬¢ centavo"

## Recent Updates v1.0.70

### üéÜ Glass Effect Premium Completado - Modo Manual
- **TRANSFORMADOS:** Todos los componentes de modo manual con glass effect inline
- **RESULTADO:** 100% coherencia visual entre modos guiado y manual

## Recent Updates v1.0.69

### üé® Glass Effect Premium en Fase 1
- **ACTUALIZADO:** Todos los componentes de Fase 1 con glass effect
- **RESULTADO:** 100% coherencia visual entre InitialWizardModal, CashCounter y Fase 1

## Recent Updates v1.0.68

### üé® Glass Badge Premium para Denominaciones
- **NUEVO:** Badge con glass effect y gradiente azul-p√∫rpura
- **BENEFICIO:** Mayor visibilidad para cajero y testigo

## Recent Updates v1.0.67

### üö® Correcci√≥n Cr√≠tica de Sintaxis JSX
- **ERROR FATAL:** Div de cierre extra sin apertura
- **RESULTADO:** Aplicaci√≥n funcional nuevamente

## Recent Updates v1.0.66

### üîß Correcci√≥n de Bugs en MobileGuidedView
- **CORREGIDO:** Overflow de texto en m√≥viles peque√±os (<360px)
- **RESULTADO:** Mantiene valor agregado sin bugs de overflow

---

## Development Commands

```bash
# Install dependencies
npm install

# Start development server (port 5173)
npm run dev

# Build for production
npm run build

# Build for development
npm run build:dev

# Lint code
npm run lint

# Preview production build
npm run preview

# Run tests (Docker)
./Scripts/docker-test-commands.sh test

# Run specific test sector
./Scripts/docker-test-commands.sh test src/__tests__/unit/utils/  # SECTOR 2

# Watch mode for development
./Scripts/docker-test-commands.sh test:watch

# Coverage report
./Scripts/docker-test-commands.sh test:coverage
```

## Architecture

### Core Technologies
- **Build Tool**: Vite with React SWC plugin
- **Framework**: React 18 with TypeScript
- **Routing**: React Router v6
- **UI Components**: shadcn/ui with Radix UI primitives
- **Styling**: Tailwind CSS with custom glass morphism theme
- **State Management**: React hooks with local storage persistence
- **Animations**: Framer Motion
- **Forms**: React Hook Form with Zod validation

### Project Structure

```
src/
‚îú‚îÄ‚îÄ components/          # UI components organized by feature
‚îÇ   ‚îú‚îÄ‚îÄ cash-counting/  # Bill, coin, and electronic payment sections
‚îÇ   ‚îú‚îÄ‚îÄ phases/         # Phase 2 delivery and verification components
‚îÇ   ‚îî‚îÄ‚îÄ ui/            # shadcn/ui components
‚îú‚îÄ‚îÄ hooks/             # Custom React hooks
‚îÇ   ‚îú‚îÄ‚îÄ usePhaseManager.ts      # Multi-phase workflow management
‚îÇ   ‚îú‚îÄ‚îÄ useGuidedCounting.ts    # Guided counting logic
‚îÇ   ‚îú‚îÄ‚îÄ useCalculations.ts      # Cash calculation logic
‚îÇ   ‚îî‚îÄ‚îÄ useLocalStorage.ts      # Persistent state management
‚îú‚îÄ‚îÄ types/             # TypeScript type definitions
‚îú‚îÄ‚îÄ utils/             # Utility functions
‚îÇ   ‚îú‚îÄ‚îÄ calculations.ts         # Core cash calculations
‚îÇ   ‚îî‚îÄ‚îÄ deliveryCalculation.ts  # Phase 2 delivery distribution
‚îî‚îÄ‚îÄ data/             # Static data (stores, employees)
```

### Key Business Logic

**Initial Wizard Flow:**
- **Step 1**: Protocol acceptance (4 simplified rules, "ready" variant for enabled state)
- **Step 2-4**: Improved select dropdowns with visible white borders
- **Step 2**: Store selection
- **Step 3**: Cashier selection
- **Step 4**: Witness selection (must be different from cashier)
- **Step 5**: Expected sales amount from SICAR system

**Three-Phase Cash Counting System:**

1. **Phase 1**: Initial cash counting with guided or manual modes
   - Starts automatically when data comes from wizard
   - Counts bills, coins, and electronic payments
   - Calculates total cash and electronic amounts
   - If total > $50, proceeds to Phase 2; otherwise skips to Phase 3

2. **Phase 2**: Cash delivery process (when total > $50)
   - Calculates optimal denomination distribution to leave exactly $50
   - Two sections: Delivery (what to deposit) and Verification (what to keep)
   - Uses intelligent algorithm to minimize small denominations

3. **Phase 3**: Final report generation with immutable results

### State Management Patterns

- **usePhaseManager**: Orchestrates the entire multi-phase workflow
- **useGuidedCounting**: Manages step-by-step counting process
- **useLocalStorage**: Persists state across sessions with automatic serialization
- **useCalculations**: Centralizes all cash calculation logic

### Component Patterns

- Glass morphism design with CSS variables for theming
- Animated components using Framer Motion for smooth transitions
- Form validation with Zod schemas
- Toast notifications via Sonner for user feedback

### Anti-Fraud Measures

- Single count restriction per session
- Immutable fields after calculation
- Mandatory witness validation
- Alert system for discrepancies > $3.00
- Pattern detection for consecutive shortages

## Important Considerations

- The app is designed for a single-page workflow without back navigation
- All monetary values are in USD with support for US coin denominations
- Phase transitions are one-way to prevent manipulation
- Local storage is used for persistence but can be cleared for new sessions
- The $50 change target is hardcoded as a business requirement

## üê≥ Docker Configuration

### Containerizaci√≥n completa

El proyecto est√° completamente dockerizado y NO requiere Node.js instalado localmente:

- **Desarrollo**: Contenedor Node.js con hot-reload en puerto 5173
- **Producci√≥n**: Nginx Alpine sirviendo archivos est√°ticos en puerto 8080
- **Multi-stage build**: Optimizaci√≥n de imagen final (~30MB)

### Comandos Docker principales

```bash
# ü§ñ [IA] - Usar script helper
./Scripts/docker-commands.sh dev       # Desarrollo
./Scripts/docker-commands.sh prod:build # Producci√≥n

# O usar Docker Compose directamente
docker compose --profile dev up        # Desarrollo
docker compose --profile prod up -d    # Producci√≥n
```

### Estructura Docker

```
/
‚îú‚îÄ‚îÄ Dockerfile              # Multi-stage build (node:20-alpine + nginx:alpine)
‚îú‚îÄ‚îÄ docker-compose.yml      # Perfiles dev y prod
‚îú‚îÄ‚îÄ .dockerignore          # Optimizaci√≥n de contexto
‚îú‚îÄ‚îÄ .env.example           # Variables de entorno
‚îú‚îÄ‚îÄ infra/
‚îÇ   ‚îî‚îÄ‚îÄ nginx.conf         # Configuraci√≥n optimizada para SPA
‚îî‚îÄ‚îÄ Scripts/
    ‚îî‚îÄ‚îÄ docker-commands.sh # Script helper para comandos Docker
```

### Variables de entorno

Las variables `VITE_SUPABASE_URL` y `VITE_SUPABASE_ANON_KEY` se pasan tanto en build como en runtime.

### Notas de desarrollo con Docker

- Las dependencias se instalan DENTRO del contenedor
- El c√≥digo fuente se monta como volumen en desarrollo
- Los cambios se reflejan autom√°ticamente (hot-reload)
- No se necesita ejecutar `npm install` localmente

## üè† Reglas de la Casa v2.0

### üö® CR√çTICAS (Nunca romper)

- **üîí Preservaci√≥n total:** No modifiques ni recortes c√≥digo sin justificaci√≥n expl√≠cita
- **‚ö° Funcionalidad intacta:** No elimines funcionalidades sin evaluar impacto completo
- **üíª TypeScript estricto:** Cero `any` - interfaces y tipado completos obligatorios
- **üê≥ Docker first:** Todo debe ser containerizable - no introduzcas dependencias que rompan containerizaci√≥n
- **üîê Compatibilidad total:** Verifica integraci√≥n con React + TypeScript + Vite + shadcn/ui + Docker

### ‚ö†Ô∏è IMPORTANTES (Seguir siempre)

- **üè† Casa limpia:** Scripts ‚Üí `/Scripts` | Documentos ‚Üí `/Documentos MarkDown` (verifica antes de crear)
- **üîç Revisar antes de crear:** Consulta lo existente, verifica compatibilidad con c√≥digo actual  
- **üó∫Ô∏è Planificaci√≥n obligatoria:** Crea **task list** antes de empezar con objetivos espec√≠ficos y medibles
- **üìù Documentaci√≥n sistem√°tica:** Comenta cambios `// ü§ñ [IA] - [Raz√≥n]` y actualiza .md relevantes
- **üéØ Versionado consistente:** Actualiza versi√≥n en Index.tsx, InitialWizardModal.tsx, CashCounter.tsx, etc.

### üîÆ FUTURO (En desarrollo)

- **üîß Worker:** [PENDIENTE] Incluir en versionado y documentaci√≥n cuando se implemente
- **üìä Rate limits:** [FUTURO] Preparar manejo de l√≠mites cuando se agreguen APIs externas
- **üîÑ Estado avanzado:** [ROADMAP] Considerar migraci√≥n a Zustand/Redux cuando el estado crezca

### üí° RECOMENDADAS (Buenas pr√°cticas)

- **‚ö° Eficiencia:** Crea solo lo necesario, reutiliza componentes, optimiza recursos
- **üß© Modularizaci√≥n:** Enf√≥cate en componentes escalables sin saturaci√≥n en un solo archivo  
- **üõ°Ô∏è Manejo de errores:** Gestiona errores correctamente, evita crashes silenciosos
- **üì± L√≠mites locales:** Respeta localStorage limits, timeouts de animaci√≥n, memoria del navegador
- **‚úÖ Build limpio:** Sin errores TypeScript, warnings resueltos, tests pasando
- **üß™ Tests cr√≠ticos:** Funciones financieras con 100% cobertura obligatoria

## üß≠ Metodolog√≠a Unificada

**Mantra central:** `Reviso ‚Üí Planifico ‚Üí Ejecuto ‚Üí Documento ‚Üí Valido`

### üìã Checklist por sesi√≥n:
- [ ] **Task list** creada antes de iniciar
- [ ] **Compatibilidad** verificada con stack actual
- [ ] **Documentaci√≥n** actualizada (comentarios + .md)
- [ ] **Versionado** aplicado consistentemente  
- [ ] **Build** exitoso sin errores ni warnings
- [ ] **Tests** ejecutados y pasando (especialmente financieros)
- [ ] **Funcionalidad** preservada al 100%

### üÜò En caso de duda:
**PARA ¬∑ PREGUNTA ¬∑ VERIFICA** (mejor preguntar que romper)

### üìö Referencias:
- **GitHub:** [Contador de Monedas](https://github.com/SamuelERS/calculadora-corte-caja)
- **Notion:** Documentaci√≥n extendida del proyecto
- **Changelog Hist√≥rico:** [CHANGELOG-HISTORICO.md](/Documentos%20MarkDown/CHANGELOG-HISTORICO.md)