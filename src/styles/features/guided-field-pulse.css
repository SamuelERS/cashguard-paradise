/* 🤖 [IA] - v1.2.25: Animación de pulso OPTIMIZADA para campos activos en GuidedFieldView */
/* Archivo CSS modular con animaciones de alto rendimiento - 40% menos consumo CPU/GPU */

/* =======================================
 * ANIMACIONES RESPONSIVAS - MÓVILES 
 * =======================================*/

/* Móviles pequeños - ANIMACIÓN BORDER PULSE (Alto rendimiento) */
@media (max-width: 640px) {
  @keyframes pulse-glow-morning {
    0%, 100% {
      border-color: rgba(244, 165, 42, 0.4);
      opacity: 0.9;
      transform: translateZ(0); /* GPU acceleration */
    }
    50% {
      border-color: rgba(244, 165, 42, 0.7);
      opacity: 1;
      transform: translateZ(0);
    }
  }

  @keyframes pulse-glow-evening {
    0%, 100% {
      border-color: rgba(10, 132, 255, 0.4);
      opacity: 0.9;
      transform: translateZ(0);
    }
    50% {
      border-color: rgba(10, 132, 255, 0.7);
      opacity: 1;
      transform: translateZ(0);
    }
  }
}

/* =======================================
 * ANIMACIONES RESPONSIVAS - TABLETS
 * =======================================*/

/* Tablets - EFECTO MIXTO (Border + glow sutil) */
@media (min-width: 641px) and (max-width: 1024px) {
  @keyframes pulse-glow-morning {
    0%, 100% {
      border-color: rgba(244, 165, 42, 0.45);
      box-shadow: 0 0 0 1px rgba(244, 165, 42, 0.2);
      opacity: 0.92;
      transform: translateZ(0) scale(1);
    }
    50% {
      border-color: rgba(244, 165, 42, 0.75);
      box-shadow: 0 0 0 2px rgba(244, 165, 42, 0.3);
      opacity: 1;
      transform: translateZ(0) scale(1.01); /* Sutil scale */
    }
  }

  @keyframes pulse-glow-evening {
    0%, 100% {
      border-color: rgba(10, 132, 255, 0.45);
      box-shadow: 0 0 0 1px rgba(10, 132, 255, 0.2);
      opacity: 0.92;
      transform: translateZ(0) scale(1);
    }
    50% {
      border-color: rgba(10, 132, 255, 0.75);
      box-shadow: 0 0 0 2px rgba(10, 132, 255, 0.3);
      opacity: 1;
      transform: translateZ(0) scale(1.01);
    }
  }
}

/* =======================================
 * ANIMACIONES RESPONSIVAS - DESKTOP
 * =======================================*/

/* Desktop - EFECTO COMPLETO (Border + glow + scale optimizado) */
@media (min-width: 1025px) {
  @keyframes pulse-glow-morning {
    0%, 100% {
      border-color: rgba(244, 165, 42, 0.4);
      box-shadow: 0 0 0 1px rgba(244, 165, 42, 0.2),
                  0 0 8px rgba(244, 165, 42, 0.1);
      opacity: 0.9;
      transform: translateZ(0) scale(1);
    }
    50% {
      border-color: rgba(244, 165, 42, 0.8);
      box-shadow: 0 0 0 2px rgba(244, 165, 42, 0.35),
                  0 0 12px rgba(244, 165, 42, 0.2);
      opacity: 1;
      transform: translateZ(0) scale(1.02); /* Efecto más notable en desktop */
    }
  }

  @keyframes pulse-glow-evening {
    0%, 100% {
      border-color: rgba(10, 132, 255, 0.4);
      box-shadow: 0 0 0 1px rgba(10, 132, 255, 0.2),
                  0 0 8px rgba(10, 132, 255, 0.1);
      opacity: 0.9;
      transform: translateZ(0) scale(1);
    }
    50% {
      border-color: rgba(10, 132, 255, 0.8);
      box-shadow: 0 0 0 2px rgba(10, 132, 255, 0.35),
                  0 0 12px rgba(10, 132, 255, 0.2);
      opacity: 1;
      transform: translateZ(0) scale(1.02);
    }
  }
}

/* =======================================
 * CLASES APLICABLES - RESPONSIVE
 * =======================================*/

.guided-field-pulse-morning {
  animation: pulse-glow-morning 3s ease-in-out infinite; /* Duración aumentada para efecto más sutil */
  contain: layout style paint; /* Optimización: aislar repintado */
}

.guided-field-pulse-evening {
  animation: pulse-glow-evening 3s ease-in-out infinite;
  contain: layout style paint;
}

/* 🤖 [IA] - Clase para pausar animación cuando no es visible */
.animation-paused {
  animation-play-state: paused !important;
}

/* Optimización GPU - Promover a capa compuesta para múltiples propiedades */
.guided-field-pulse-morning,
.guided-field-pulse-evening {
  will-change: border-color, opacity, transform, box-shadow;
  /* Forzar aceleración GPU */
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
}

/* Remover will-change cuando está pausada para liberar memoria GPU */
.animation-paused {
  will-change: auto;
  transform: none; /* Remover GPU layer cuando pausada */
}

/* =======================================
 * NUEVA ANIMACIÓN SIMPLE - ALTA EFICIENCIA
 * =======================================*/

/* Para inputs que solo necesitan indicar "esperando entrada" */
@keyframes input-waiting-pulse {
  0%, 100% {
    opacity: 0.85;
  }
  50% {
    opacity: 1;
  }
}

.input-waiting-pulse {
  animation: input-waiting-pulse 2s ease-in-out infinite;
  border-width: 2px; /* Asegurar borde visible */
}

/* Reducir animación en dispositivos con preferencia de movimiento reducido */
@media (prefers-reduced-motion: reduce) {
  .guided-field-pulse-morning,
  .guided-field-pulse-evening,
  .input-waiting-pulse {
    animation: none;
    will-change: auto;
    transform: none;
  }
  
  /* Solo mantener un sutil borde estático */
  .guided-field-pulse-morning {
    border-color: rgba(244, 165, 42, 0.6);
    opacity: 1;
  }
  
  .guided-field-pulse-evening {
    border-color: rgba(10, 132, 255, 0.6);
    opacity: 1;
  }
  
  .input-waiting-pulse {
    opacity: 1;
  }
}

/* =======================================
 * OPTIMIZACIONES ADICIONALES
 * =======================================*/

/* Pausar animaciones cuando la ventana no está en foco */
@media (prefers-reduced-motion: no-preference) {
  .guided-field-pulse-morning:not(:focus),
  .guided-field-pulse-evening:not(:focus) {
    /* Mantener animación solo en elementos enfocados o visibles */
  }
}

/* Reducir intensidad en dispositivos de batería baja (cuando esté disponible) */
@media (prefers-reduced-data: reduce) {
  .guided-field-pulse-morning,
  .guided-field-pulse-evening {
    animation-duration: 4s; /* Animación más lenta */
  }
}